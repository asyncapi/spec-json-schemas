{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "http://asyncapi.com/definitions/3.0.0/operationReply.json",
    "description": "Describes the reply part that MAY be applied to an Operation Object. If an operation implements the request/reply pattern, the reply object represents the response message.",
    "type": "object",
    "properties": {
        "address": {
            "if": {
                "required": [ "$ref" ]
            },
            "then": {
                "$ref": "http://asyncapi.com/definitions/3.0.0/Reference.json"
            },
            "else": {
                "$ref": "http://asyncapi.com/definitions/3.0.0/operationReplyAddress.json"
            }
        },
        "channel": {
            "$ref": "http://asyncapi.com/definitions/3.0.0/Reference.json"
        },
        "messages": {
            "description": "A list of $ref pointers pointing to the supported Message Objects that can be processed by this operation as reply. It MUST contain a subset of the messages defined in the channel referenced in this operation reply. Every message processed by this operation MUST be valid against one, and only one, of the message objects referenced in this list. Please note the messages property value MUST be a list of Reference Objects and, therefore, MUST NOT contain Message Objects. However, it is RECOMMENDED that parsers (or other software) dereference this property for a better development experience.",
            "type": "array",
            "items": {
                "$ref": "http://asyncapi.com/definitions/3.0.0/Reference.json"
            }
        }
    },
    "patternProperties": {
        "^x-[\\w\\d\\.\\x2d_]+$": {
            "$ref": "http://asyncapi.com/definitions/3.0.0/specificationExtension.json"
        }
    },
    "additionalProperties": false,
    "definitions": {
        "http://asyncapi.com/definitions/3.0.0/Reference.json": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "http://asyncapi.com/definitions/3.0.0/Reference.json",
            "description": "A simple object to allow referencing other components in the specification, internally and externally.",
            "type": "object",
            "required": [ "$ref" ],
            "properties": {
                "$ref": {
                    "description": "The reference string.",
                    "$ref": "http://asyncapi.com/definitions/3.0.0/ReferenceObject.json"
                }
            },
            "example": {
                "$ref": "http://asyncapi.com/examples/3.0.0/ReferenceObject.json"
            }
        },
        "http://asyncapi.com/definitions/3.0.0/ReferenceObject.json": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "http://asyncapi.com/definitions/3.0.0/ReferenceObject.json",
            "type": "string",
            "format": "uri-reference"
        },
        "http://asyncapi.com/definitions/3.0.0/operationReplyAddress.json": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "http://asyncapi.com/definitions/3.0.0/operationReplyAddress.json",
            "description": "An object that specifies where an operation has to send the reply",
            "type": "object",
            "required": [ "location" ],
            "properties": {
                "description": {
                    "description": "An optional description of the address. CommonMark is allowed.",
                    "type": "string"
                },
                "location": {
                    "description": "A runtime expression that specifies the location of the reply address.",
                    "type": "string",
                    "pattern": "^\\$message\\.(header|payload)#(\\/(([^\\/~])|(~[01]))*)*"
                }
            },
            "patternProperties": {
                "^x-[\\w\\d\\.\\x2d_]+$": {
                    "$ref": "http://asyncapi.com/definitions/3.0.0/specificationExtension.json"
                }
            },
            "additionalProperties": false,
            "example": {
                "$ref": "http://asyncapi.com/examples/3.0.0/operationReplyAddress.json"
            }
        },
        "http://asyncapi.com/definitions/3.0.0/specificationExtension.json": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "http://asyncapi.com/definitions/3.0.0/specificationExtension.json",
            "description": "Any property starting with x- is valid.",
            "additionalItems": true,
            "additionalProperties": true
        }
    }
}